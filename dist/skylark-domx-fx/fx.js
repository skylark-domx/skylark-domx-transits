/**
 * skylark-domx-fx - The skylark fx library for dom api extension.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.0
 * @link www.skylarkjs.org
 * @license MIT
 */
define(["skylark-langx/skylark","skylark-langx/langx","skylark-domx-browser","skylark-domx-geom","skylark-domx-styler","skylark-domx-eventer"],function(i,t,n,e,o,s){var a,r,l,c,p,d,u,m=n.normalizeCssEvent("AnimationEnd"),g=n.normalizeCssEvent("TransitionEnd"),h=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i,f=n.css3PropPrefix+"transform",y={};function v(i,n,v,b,T,k){var w,C,P,z={},E=[],I="",j=this,O=!1,F=!1;if(t.isPlainObject(v)&&(b=v.easing,T=v.complete,k=v.delay,v=v.duration),t.isString(v)&&(v=B.speeds[v]),void 0===v&&(v=B.speeds.normal),v/=1e3,B.off&&(v=0),t.isFunction(b)?(T=b,eace="swing"):b=b||"swing",k?k/=1e3:k=0,t.isString(n))z[a]=n,z[r]=v+"s",z[l]=b,C=m;else{for(w in n){var N=n[w];if(h.test(w))I+=w+"("+N+") ";else{if("scrollTop"===w&&(F=!0),"clip"==w&&t.isPlainObject(N)){if(z[w]="rect("+N.top+"px,"+N.right+"px,"+N.bottom+"px,"+N.left+"px)","auto"==o.css(i,"clip")){var S=e.size(i);o.css(i,"clip","rect(0px,"+S.width+"px,"+S.height+"px,0px)"),!0}}else z[w]=N;E.push(t.dasherize(w))}}C=g}return I&&(z[f]=I,E.push(f)),v>0&&t.isPlainObject(n)&&(z[c]=E.join(", "),z[p]=v+"s",z[u]=k+"s",z[d]=b),P=function(t){if(O=!0,t){if(t.target!==t.currentTarget)return;s.off(t.target,C,P)}else s.off(i,m,P);o.css(i,y),T&&T.call(this)},v>0&&(s.on(i,C,P),t.debounce(function(){O||P.call(j)},1e3*(v+k)+25)()),i.clientLeft,o.css(i,z),v<=0&&t.debounce(function(){O||P.call(j)},0)(),F&&x(i,n.scrollTop,v,T),this}function b(i,n,e){return o.show(i),n&&(!e&&t.isFunction(n)&&(e=n,n="normal"),o.css(i,"opacity",0),v(i,{opacity:1,scale:"1,1"},n,e)),this}function T(i,n,e){return n?(!e&&t.isFunction(n)&&(e=n,n="normal"),v(i,{opacity:0,scale:"0,0"},n,function(){o.hide(i),e&&e.call(i)})):o.hide(i),this}function x(i,n,e,o){var s=parseInt(i.scrollTop),a=0,r=1e3*e/5,l=parseInt(n),c=setInterval(function(){++a<=r&&(i.scrollTop=(l-s)/r*a+s),a>=r+1&&(clearInterval(c),o&&t.debounce(o,1e3)())},5)}function k(i,t,n,e,o){return v(i,{opacity:n},t,e,o),this}function w(i,t,n,e){var s=o.css(i,"opacity");return s>0?o.css(i,"opacity",0):s=1,o.show(i),k(i,t,s,n,e),this}function C(i,n,e,s){var a,r=o.css(i,"opacity"),l={};return t.isPlainObject(n)?(l.easing=n.easing,l.duration=n.duration,a=n.complete):(l.duration=n,s?(a=s,l.easing=e):a=e),l.complete=function(){o.css(i,"opacity",r),o.hide(i),a&&a.call(i)},k(i,l,0),this}function P(i,t,n){var e=o.css(i,"position");b(i),o.css(i,{position:"absolute",visibility:"hidden"});var s=o.css(i,"margin-top"),a=o.css(i,"margin-bottom"),r=o.css(i,"padding-top"),l=o.css(i,"padding-bottom"),c=o.css(i,"height");return o.css(i,{position:e,visibility:"visible",overflow:"hidden",height:0,marginTop:0,marginBottom:0,paddingTop:0,paddingBottom:0}),v(i,{height:c,marginTop:s,marginBottom:a,paddingTop:r,paddingBottom:l},{duration:t,complete:function(){n&&n.apply(i)}}),this}function z(i,t,n){if(e.height(i)>0){o.css(i,"position");var s=o.css(i,"height"),a=o.css(i,"margin-top"),r=o.css(i,"margin-bottom"),l=o.css(i,"padding-top"),c=o.css(i,"padding-bottom");o.css(i,{visibility:"visible",overflow:"hidden",height:s,marginTop:a,marginBottom:r,paddingTop:l,paddingBottom:c}),v(i,{height:0,marginTop:0,marginBottom:0,paddingTop:0,paddingBottom:0},{duration:t,queue:!1,complete:function(){T(i),o.css(i,{visibility:"visible",overflow:"hidden",height:s,marginTop:a,marginBottom:r,paddingTop:l,paddingBottom:c}),n&&n.apply(i)}})}return this}function B(){return B}return y[a=n.normalizeCssProperty("animation-name")]=y[r=n.normalizeCssProperty("animation-duration")]=y[n.normalizeCssProperty("animation-delay")]=y[l=n.normalizeCssProperty("animation-timing-function")]="",y[c=n.normalizeCssProperty("transition-property")]=y[p=n.normalizeCssProperty("transition-duration")]=y[u=n.normalizeCssProperty("transition-delay")]=y[d=n.normalizeCssProperty("transition-timing-function")]="",t.mixin(B,{off:!1,speeds:{normal:400,fast:200,slow:600},animate:v,emulateTransitionEnd:function(i,t){var e=!1;return s.one(i,"transitionEnd",function(){e=!0}),setTimeout(function(){e||s.trigger(i,n.support.transition.end)},t),this},fadeIn:w,fadeOut:C,fadeTo:k,fadeToggle:function(i,t,n,e){return o.isInvisible(i)?w(i,t,easing,callback):C(i,t,easing,callback),this},hide:T,scrollToTop:x,slideDown:P,slideToggle:function(i,t,n){return 0==e.height(i)?P(i,t,n):z(i,t,n),this},slideUp:z,show:b,throb:function(i,t){var n,e=this,s=(t=t||{}).text,a=(t.style,t.time),r=t.callback,l=this.createElement("div",{class:t.className||"throbber"}),c=(function(i,t){var n=createElement("div",t);o.css(n,{position:"absolute",top:0,left:0,width:"100%",height:"100%",zIndex:2147483647,opacity:.7}),i.appendChild(n)}(l,{class:"overlay fade"}),this.createElement("div",{class:"throb"})),p=this.createTextNode(s||""),d=function(){n&&(clearTimeout(n),n=null),l&&(e.remove(l),l=null)};return t.style&&o.css(l,t.style),c.appendChild(p),l.appendChild(c),i.appendChild(l),a&&(n=setTimeout(function(){d(),r&&r()},a)),{remove:d,update:function(i){i&&i.text&&l&&(p.nodeValue=i.text)}}},toggle:function(i,t,n){return o.isInvisible(i)?b(i,t,n):T(i,t,n),this}}),i.attach("domx.fx",B)});
//# sourceMappingURL=sourcemaps/fx.js.map
