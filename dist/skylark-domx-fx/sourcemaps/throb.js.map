{"version":3,"sources":["throb.js"],"names":["define","langx","styler","noder","fx","animate","throb","elm","params","timer","text","time","style","callback","throbber","createElement","class","className","textNode","createTextNode","remove","clearTimeout","css","appendChild","setTimeout","update","nodeValue"],"mappings":";;;;;;;AAAAA,QACI,sBACA,sBACA,qBACA,OACA,aACF,SAASC,EAAMC,EAAOC,EAAMC,EAAGC,GA8D7B,OAAOD,EAAGE,MAtDV,SAAeC,EAAKC,GAEhB,IAKIC,EAJAC,GAFJF,EAASA,OAESE,KAEdC,GADQH,EAAOI,MACRJ,EAAOG,MACdE,EAAWL,EAAOK,SAGlBC,EAAWX,EAAMY,cAAc,OAC3BC,MAASR,EAAOS,WAAa,aAKjCX,EAAQH,EAAMY,cAAc,OACxBC,MAASR,EAAOF,OAASE,EAAOF,MAAMW,WAAa,UAEvDC,EAAWf,EAAMgB,eAAeT,GAAQ,IACxCU,EAAS,WACDX,IACAY,aAAaZ,GACbA,EAAQ,MAERK,IACAX,EAAMiB,OAAON,GACbA,EAAW,OAsBvB,OAdIN,EAAOI,OACPV,EAAOoB,IAAIR,EAASN,EAAOI,OAE/BN,EAAMiB,YAAYL,GAClBJ,EAASS,YAAYjB,GACrBC,EAAIgB,YAAYT,GAKZH,IACAF,EAAQe,WALF,WACNJ,IACIP,GAAUA,KAGUF,KAIxBS,OAAQA,EACRK,OArBS,SAASjB,GACVA,GAAUA,EAAOE,MAAQI,IACzBI,EAASQ,UAAYlB,EAAOE","file":"../throb.js","sourcesContent":["define([\r\n    \"skylark-langx/langx\",\r\n    \"skylark-domx-styler\",\r\n    \"skylark-domx-noder\",\r\n    \"./fx\",\r\n    \"./animate\"\r\n],function(langx,styler,noder,fx,animate) {\r\n\r\n    \r\n    /*   \r\n     * Replace an old node with the specified node.\r\n     * @param {HTMLElement} elm\r\n     * @param {Node} params\r\n     */\r\n    function throb(elm, params) {\r\n        params = params || {};\r\n        var self = this,\r\n            text = params.text,\r\n            style = params.style,\r\n            time = params.time,\r\n            callback = params.callback,\r\n            timer,\r\n\r\n            throbber = noder.createElement(\"div\", {\r\n                \"class\": params.className || \"throbber\"\r\n            }),\r\n            //_overlay = overlay(throbber, {\r\n            //    \"class\": 'overlay fade'\r\n            //}),\r\n            throb = noder.createElement(\"div\", {\r\n                \"class\": params.throb && params.throb.className || \"throb\"\r\n            }),\r\n            textNode = noder.createTextNode(text || \"\"),\r\n            remove = function() {\r\n                if (timer) {\r\n                    clearTimeout(timer);\r\n                    timer = null;\r\n                }\r\n                if (throbber) {\r\n                    noder.remove(throbber);\r\n                    throbber = null;\r\n                }\r\n            },\r\n            update = function(params) {\r\n                if (params && params.text && throbber) {\r\n                    textNode.nodeValue = params.text;\r\n                }\r\n            };\r\n        if (params.style) {\r\n            styler.css(throbber,params.style);\r\n        }\r\n        throb.appendChild(textNode);\r\n        throbber.appendChild(throb);\r\n        elm.appendChild(throbber);\r\n        var end = function() {\r\n            remove();\r\n            if (callback) callback();\r\n        };\r\n        if (time) {\r\n            timer = setTimeout(end, time);\r\n        }\r\n\r\n        return {\r\n            remove: remove,\r\n            update: update\r\n        };\r\n    }\r\n\r\n    return fx.throb = throb;\r\n});"]}