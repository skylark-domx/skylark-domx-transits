{"version":3,"sources":["pulsate.js"],"names":["define","langx","geom","styler","transits","transit","pulsate","elm","options","done","mode","show","anims","times","duration","animateTo","i","Deferred","isInvisible","css","funcs","doAnimate","properties","ease","d","resolve","promise","push","opacity","easing","reduce","prev","curr","index","array","then","this"],"mappings":";;;;;;;AAAAA,OAAO,CACH,sBACA,oBACA,sBACA,aACA,aACF,SAASC,EAAMC,EAAKC,EAAOC,EAASC,GAuDrC,OAAOD,EAASE,QArDhB,SAAiBC,EAAKC,EAASC,GAC9B,IACCC,EAAOF,EAAQE,KACfC,EAAgB,SAATD,GAAmB,CAACA,EAK3BE,EAAmC,GAAvBJ,EAAQK,OAAS,IAHlBF,GADK,SAATD,EAI+C,EAAI,GAC1DI,EAAWN,EAAQM,SAAWF,EAC9BG,EAAY,EACZC,EAAI,EAUDC,IARCN,GAAQR,EAAOe,YAAYX,CAAG,KAClCJ,EAAOgB,IAAIZ,EAAK,UAAW,CAAE,EAC7BJ,EAAOQ,KAAKJ,CAAG,EACfQ,EAAY,GAKEd,EAAMgB,UACjBG,EAAQ,GAEZ,SAASC,EAAUd,EAAIe,EAAYR,EAAUS,GAC5C,OAAO,WACN,IAAIC,EAAI,IAAIP,EAKZ,OAHAZ,EAASE,EAAIe,EAAYR,EAAUS,EAAM,WACxCC,EAAEC,QAAQ,CACX,CAAC,EACMD,EAAEE,OAEV,CACD,CAGA,KAAQV,EAAIJ,EAAOI,CAAC,GACnBI,EAAMO,KAAKN,EAAUd,EAAI,CAAEqB,QAASb,CAAU,EAAGD,EAAUN,EAAQqB,MAAO,CAAC,EAC3Ed,EAAY,EAAIA,EAUjB,OAPGK,EAAMO,KAAKN,EAAUd,EAAI,CAAEqB,QAASb,CAAU,EAAGD,EAAUN,EAAQqB,MAAO,CAAC,EAE9ET,EAAMO,KAAKlB,CAAI,EACfW,EAAMU,OAAO,SAASC,EAAMC,EAAMC,EAAOC,GACtC,OAAOH,EAAKI,KAAKH,CAAI,CACxB,EAAGf,EAASQ,QAAQ,CAAC,EAEdW,IAER,CAID,CAAC","file":"../pulsate.js","sourcesContent":["define([\r\n    \"skylark-langx/langx\",\r\n    \"skylark-domx-geom\",\r\n    \"skylark-domx-styler\",\r\n    \"./transits\",\r\n    \"./transit\"\r\n],function(langx,geom,styler,transits,transit) {\r\n\r\n\tfunction pulsate(elm, options, done ) {\r\n\t\tvar \r\n\t\t\tmode = options.mode,\r\n\t\t\tshow = mode === \"show\" || !mode,\r\n\t\t\thide = mode === \"hide\",\r\n\t\t\tshowhide = show || hide,\r\n\r\n\t\t\t// Showing or hiding leaves off the \"last\" animation\r\n\t\t\tanims = ( ( options.times || 5 ) * 2 ) + ( showhide ? 1 : 0 ),\r\n\t\t\tduration = options.duration / anims,\r\n\t\t\tanimateTo = 0,\r\n\t\t\ti = 1;\r\n\r\n\t\tif ( show || styler.isInvisible(elm) ) {\r\n\t\t\tstyler.css(elm, \"opacity\", 0 );\r\n\t\t\tstyler.show(elm);\r\n\t\t\tanimateTo = 1;\r\n\t\t}\r\n\r\n\t\t// Anims - 1 opacity \"toggles\"\r\n\r\n\t\tvar Deferred = langx.Deferred;\r\n\t\tvar funcs = [];\r\n\r\n\t\tfunction doAnimate(elm,properties, duration, ease) {\r\n\t\t\treturn function() {\r\n\t\t\t\tvar d = new Deferred();\r\n\r\n\t\t\t\ttransit( elm,properties, duration, ease ,function(){\r\n\t\t\t\t\td.resolve();\r\n\t\t\t\t});\r\n\t\t\t\treturn d.promise;\r\n\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\tfor ( ; i < anims; i++ ) {\r\n\t\t\tfuncs.push(doAnimate(elm,{ opacity: animateTo }, duration, options.easing ));\r\n\t\t\tanimateTo = 1 - animateTo;\r\n\t\t}\r\n\r\n\t    funcs.push(doAnimate(elm,{ opacity: animateTo }, duration, options.easing ));\r\n\r\n\t\tfuncs.push(done);\r\n\t\tfuncs.reduce(function(prev, curr, index, array) {\r\n\t  \t\treturn prev.then(curr);\r\n\t\t}, Deferred.resolve());\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n\treturn transits.pulsate = pulsate;\r\n\r\n});\r\n"]}