{"version":3,"sources":["shake.js"],"names":["define","langx","geom","styler","transits","transit","shake","elm","options","done","i","direction","distance","times","speed","Math","round","duration","ref","positiveMotion","animation0","animation","animation1","animation2","Deferred","doAnimate","properties","ease","d","resolve","promise","start","relativePosition","funcs","push","easing","reduce","prev","curr","index","array","then","this"],"mappings":";;;;;;;AAAAA,OAAO,CACH,sBACA,oBACA,sBACA,aACA,aACF,SAASC,EAAMC,EAAKC,EAAOC,EAASC,GAwDrC,OAAOD,EAASE,MAvDhB,SAAeC,EAAKC,EAASC,GAE5B,IAAIC,EAAI,EACPC,EAAYH,EAAQG,WAAa,OACjCC,EAAWJ,EAAQI,UAAY,GAC/BC,EAAQL,EAAQK,OAAS,EAEzBC,EAAQC,KAAKC,MAAOR,EAAQS,UADZ,EAARJ,EAAY,EACyB,EAC7CK,EAAsB,OAAdP,GAAoC,SAAdA,EAAyB,MAAQ,OAC/DQ,EAAiC,OAAdR,GAAoC,SAAdA,EACzCS,EAAa,GACbC,EAAY,GACZC,EAAa,GACbC,EAAa,GAEVC,EAAWvB,EAAMuB,SAIrB,SAASC,EAAUlB,EAAImB,EAAYT,EAAUU,GAC5C,OAAO,WACN,IAAIC,EAAI,IAAIJ,EAKZ,OAHAnB,EAAQE,EAAKmB,EAAYT,EAAUU,EAAM,WACxCC,EAAEC,QAAQ,CACX,CAAC,EACMD,EAAEE,OACV,CACD,CAYA,IAxBCC,MAAQ7B,EAAK8B,iBAAiBzB,CAAG,EAAEW,GACnCe,MAAQ,GAcTb,EAAYF,GAAQa,MACpBV,EAAWH,GAAQa,OAAUZ,EAAiB,CAAC,EAAI,GAAMP,EACzDU,EAAYJ,GAAQG,EAAWH,IAAUC,EAAiB,EAAI,CAAC,GAAMP,EAAW,EAChFW,EAAYL,GAAQI,EAAYJ,IAAUC,EAAiB,CAAC,EAAI,GAAMP,EAAW,EAG9EqB,MAAMC,KAAKT,EAAUlB,EAAIc,EAAWP,EAAON,EAAQ2B,MAAO,CAAC,EAGtDzB,EAAIG,EAAOH,CAAC,GAChBuB,MAAMC,KAAKT,EAAUlB,EAAIe,EAAYR,EAAON,EAAQ2B,MAAO,CAAC,EAC5DF,MAAMC,KAAKT,EAAUlB,EAAIgB,EAAYT,EAAON,EAAQ2B,MAAO,CAAC,EAUhE,OAPGF,MAAMC,KAAKT,EAAUlB,EAAIa,EAAYN,EAAO,EAAIN,EAAQ2B,MAAO,CAAC,EAEnEF,MAAMC,KAAKzB,CAAI,EACfwB,MAAMG,OAAO,SAASC,EAAMC,EAAMC,EAAOC,GACtC,OAAOH,EAAKI,KAAKH,CAAI,CACxB,EAAGd,EAASK,QAAQ,CAAC,EAEda,IACR,CAID,CAAC","file":"../shake.js","sourcesContent":["define([\r\n    \"skylark-langx/langx\",\r\n    \"skylark-domx-geom\",\r\n    \"skylark-domx-styler\",\r\n    \"./transits\",\r\n    \"./transit\"\r\n],function(langx,geom,styler,transits,transit) {\r\n\tfunction shake(elm, options, done ) {\r\n\r\n\t\tvar i = 1,\r\n\t\t\tdirection = options.direction || \"left\",\r\n\t\t\tdistance = options.distance || 20,\r\n\t\t\ttimes = options.times || 3,\r\n\t\t\tanims = times * 2 + 1,\r\n\t\t\tspeed = Math.round( options.duration / anims ),\r\n\t\t\tref = ( direction === \"up\" || direction === \"down\" ) ? \"top\" : \"left\",\r\n\t\t\tpositiveMotion = ( direction === \"up\" || direction === \"left\" ),\r\n\t\t\tanimation0 = {},\r\n\t\t\tanimation = {},\r\n\t\t\tanimation1 = {},\r\n\t\t\tanimation2 = {};\r\n\r\n\t\tvar Deferred = langx.Deferred;\r\n\t\t\tstart = geom.relativePosition(elm)[ref],\r\n\t\t\tfuncs = [];\r\n\r\n\t\tfunction doAnimate(elm,properties, duration, ease) {\r\n\t\t\treturn function() {\r\n\t\t\t\tvar d = new Deferred();\r\n\r\n\t\t\t\ttransit(elm, properties, duration, ease ,function(){\r\n\t\t\t\t\td.resolve();\r\n\t\t\t\t});\r\n\t\t\t\treturn d.promise;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Animation\r\n\t\tanimation0[ ref ] = start;\r\n\t\tanimation[ ref ] = start + ( positiveMotion ? -1 : 1 ) * distance;\r\n\t\tanimation1[ ref ] = animation[ ref ] + ( positiveMotion ? 1 : -1 ) * distance * 2;\r\n\t\tanimation2[ ref ] = animation1[ ref ] + ( positiveMotion ? -1 : 1 ) * distance * 2;\r\n\r\n\t\t// Animate\r\n\t    funcs.push(doAnimate(elm,animation, speed, options.easing ));\r\n\r\n\t\t// Shakes\r\n\t\tfor ( ; i < times; i++ ) {\r\n\t\t    funcs.push(doAnimate(elm,animation1, speed, options.easing ));\r\n\t\t    funcs.push(doAnimate(elm,animation2, speed, options.easing ));\r\n\t\t}\r\n\r\n\t    funcs.push(doAnimate(elm,animation0, speed /2 , options.easing ));\r\n\r\n\t\tfuncs.push(done);\r\n\t\tfuncs.reduce(function(prev, curr, index, array) {\r\n\t  \t\treturn prev.then(curr);\r\n\t\t}, Deferred.resolve());\r\n\r\n\t\treturn this;\r\n\t}\r\n\r\n\treturn transits.shake = shake;\r\n\r\n});\r\n"]}